var mobileApp=mobileApp||{};(function(e,t){var n=function(e,n){this.elem=e;this.$elem=t(e);this.options=n};n.prototype={defaults:{page_id:"build-menu-page",menu:"",menu_width:200,menu_id:"mobile-nav",button_content:"",prepend_button_to:"",menu_bar:""},init:function(){var e=this;e.config=t.extend({},e.defaults,e.options);if(t(e.config.menu_id).length===0){this.setLayout()}return e},buildMenu:function(){var e=this;e.config=t.extend({},e.defaults,e.options);var n=e.config.menu,r=t("#build-menu"),i=[];if(n){if(t.isArray(n)){t(n).each(function(n,i){r.append(t(i).clone().addClass(e.config.menu_id+"-"+n));t(i).hide()})}else{r.append(t(n).clone().addClass(e.config.menu_id+"-0").removeAttr("id"));t(n).hide()}}else{return false}},setCSS:function(){var e=this;e.config=t.extend({},e.defaults,e.options);t("#build-menu-overlay").css({position:"absolute",top:0,bottom:0,right:0,left:0,"z-index":99,opacity:.5,display:"none"});t("html,body").css("height","100%");if(e.config.menu_bar){t(e.config.menu_bar).css({position:"fixed"})}},setLayout:function(){function i(){if(t("html").hasClass("build-menu-close")){t("html").removeClass("build-menu-animating")}}var e=this;e.config=t.extend({},e.defaults,e.options);if(e.config.prepend_button_to==""){var n="#"+e.config.page_id}else{var n=e.config.prepend_button_to}e.$elem.wrapInner('<div id="'+e.config.page_id+'" />').find("#"+e.config.page_id).before('<div id="build-menu" />');t("#"+e.config.page_id).prepend('<div id="build-menu-overlay" />');this.buildMenu();this.setCSS();var r=document.getElementById(e.config.page_id);r.addEventListener("oTransitionEnd",i,false);r.addEventListener("transitionend",i,false);r.addEventListener("webkitTransitionEnd",i,false);r.addEventListener("MSTransitionEnd",i,false);t("#build-menu-button, #build-menu-overlay").on("click",function(n){n.preventDefault();var r=t("html");var i=t("#"+e.config.page_id);var s=t("#build-menu-overlay");r.addClass("build-menu-animating");if(r.hasClass("build-menu-open")){r.removeClass("build-menu-open");r.addClass("build-menu-close");i.css({"-webkit-transform":"translateX(0px)","-moz-transform":"translateX(0px)","-o-transform":"translateX(0px)","-ms-transform":"translateX(0px)",transform:"translateX(0px)"});s.fadeTo("slow",0,function(){t(this).css("visibility","hidden")})}else{r.addClass("build-menu-open");r.removeClass("build-menu-close");i.css({"-webkit-transform":"translateX("+ -200+"px"+")","-moz-transform":"translateX("+ -200+"px"+")","-o-transform":"translateX("+ -200+"px"+")","-ms-transform":"translateX("+ -200+"px"+")",transform:"translateX("+ -200+"px"+")"});s.css("visibility","visible").fadeTo("slow",.5)}})}};n.defaults=n.prototype.defaults;t.fn.mobile_menu=function(e){return this.each(function(){(new n(this,e)).init()})};e.MobileMenu=n})(mobileApp,jQuery)